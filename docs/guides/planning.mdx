---
title: Planning
---

One of ControlFlow's core tenets is that having well-defined tasks leads to better agentic outcomes. The framework has many ways to let you dynamically generate tasks and subtasks to guide your agents.

One of the most exciting areas of active research is letting agents generate their own tasks! ControlFlow has a few ways to do this. 

## Automatically Generate Subtask DAGs

You can automatically create subtasks for any task by calling its `generate_subtasks()` method. This method will invoke an agent to come up with an actionable plan for achieving the main task; each step of the plan will become a new subtask of the main task.

```python
import controlflow as cf

task = cf.Task(
    objective="Compare the height of the tallest building "
    "in North America to the tallest building in Europe",
)

task.generate_subtasks()

print([f'{i+1}: {t.objective}' for i, t in enumerate(task.subtasks)])
```

Running the above code will print something like:

```python
[
    "1: Identify the Tallest Building in North America",
    "2: Identify the Tallest Building in Europe",
    "3: Obtain Height of the Tallest Building in North America",
    "4: Obtain Height of the Tallest Building in Europe",
    "5: Compare the Heights",
]
 ```
If you investigate more closely, you'll see that the subtasks have proper dependencies. In the above example, #3 depends on #1, #4 depends on #2, and #5 depends on #3 and #4.

<Tip>
Subtask generation isn't magic: it's a ControlFlow flow!
</Tip>

### Customizing subtask generation
You can influence subtask generation in a few ways.

#### Planning agent

By default, subtasks are generated by the first agent assigned to the parent task. You can customize this by passing an `agent` argument to `generate_subtasks()`.


#### Instructions

You can provide natural language `instructions` to help the agent generate subtasks. This is especially useful when the task is ambiguous or requires domain-specific knowledge.
