### Overview of Subtasks

Subtasks in ControlFlow allow you to break down complex tasks into smaller, more manageable units. This hierarchical task structure helps organize workflows efficiently and ensures that each subtask is completed or skipped before the parent task can be marked as done. This drives progress and helps manage complex workflows.

#### Why Use Subtasks?

Subtasks help organize the workflow for the agent by breaking down complex tasks into smaller units. Instead of "hoping" that the agent figures out the best way to complete a task, you can explicitly define the required steps. This makes it easier to manage and scale complex AI-powered applications.

#### Creating Subtasks

The recommended pattern for creating subtasks is to use a parent task as a context manager. Any tasks created within the context will automatically be associated with the parent task. Alternatively, you can explicitly specify the parent task when creating a subtask.

<CodeGroup>
```python Context manager
from controlflow import Task

with Task(objective="Prepare data", result_type=list) as parent_task:
    child_task_1 = Task('Load data from the source', result_type=list)
    child_task_2 = Task(
        'Clean and preprocess the loaded data', 
        result_type=list, 
        context=dict(data=child_task_1),
    )
```

```python Parent parameter
from controlflow import Task

parent_task = Task(objective="Prepare data", result_type=list)
child_task_1 = Task(
    'Load data from the source', 
    result_type=list, 
    parent=parent_task,
)
child_task_2 = Task(
    'Clean and preprocess the loaded data', 
    result_type=list, 
    context=dict(data=child_task_1),
    parent=parent_task,
)
```
</CodeGroup>

#### Running Subtasks

A subtask can be run like any other task. 

However, because subtasks are automatically considered dependencies of their parent task, you can run all subtasks by running their parent.

```python
parent_task.run()
```
